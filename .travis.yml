language: node_js

node_js:
  - 4

sudo: false

env:
  global:
    # CODECLIMATE_REPO_TOKEN
    - secure: lipwhpJTUMM056Ha6C0+aublNKjNtaRHFXJ5zR7Rmf8y/PPsKeqrarg0zdHt9UEPdLfpHaURKfPn2yT5SC/djSPwVYuTqWlJRKomQpH68w0CU9Tdfc9OjiPXM84eDp3LH+uG4YW3e21gu/dLsxnfHPlFYdmYFvs4OowQW8jieUFvH3cOUjrM67aViCjImxXqAq5q7oIQMUOMXphMLLurFNuH7JnRQtxoMkJpBAxw0nC6Tn8aN+ztLJyLEypbfqOZSbFNMYYa/RB686wNAU+YYQTXz34Tu9ukDmVX8MViHCfI2DLtlqw6ww4xiKiY8BsYijG3mGWIHAvj6oIi2hdcpKUPWT6UQj0cg+4+DlXYmosuBY69eyt9J//KVn/QMljzn3JS8cgTyrSvpYNicSDGt9aXaimKdxwoxNoa20CWvRRC/du6gpfMFRfakRXYZMoxMRtv4eyFZNWB8LUSyBEuuXCU7XCu7+01Ru7D4hhERFvhF/oiqG/Mv1n7XWCVo71V8q/btaip1cCJO25S2rcpN418dZY/MFPjhZ4cDnDyCHRW3y3js8htiiNaXULjoQeUAf1TCyxEPzg8y7RQAX4Ai7Qt3gVPkARbEidEIP4LkwDtZMbCjKz2MkwxRW2jsY03giT6eb5HGoF8byp8er+tMUI3e+jtUYh/o17DyCPl4sw=

cache:
  directories:
    - node_modules

before_install:
  - npm install --global eslint@^1.10.3 jscs@^2.7.0 write-good@^0.9.1 nsp@^2.2.0
  - npm install --global karma-cli@^0.1.2

before_script:
  - npm install karma-firefox-launcher@^0.1.7 karma-phantomjs-launcher@^0.2.2
  - export KARMA_BROWSERS=Firefox,PhantomJS
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

after_success:
  - npm install codeclimate-test-reporter@^0.1.1
  - KARMA_COVERAGE=lcovonly KARMA_BROWSERS=Firefox karma start ./test/karma.conf.js --single-run
  - cat ./coverage/*/lcov.info | ./node_modules/.bin/codeclimate
